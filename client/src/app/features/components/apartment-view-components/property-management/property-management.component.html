<div class="mgmt-container">
  <aside class="sidebar">
    <button [class.active]="view === 'availability'" (click)="view = 'availability'">
      ğŸ“… Dostupnost
    </button>
    <button [class.active]="view === 'pricing'" (click)="view = 'pricing'">
      ğŸ’° Posebne Cene
    </button>
    <button [class.active]="view === 'settings'" (click)="view = 'settings'">
      âš™ï¸ OpÅ¡ta Pravila
    </button>
  </aside>

  <main class="content">

    <div *ngIf="view === 'availability'" class="pricing-layout">
      <div class="form-side">
        <h3>Upravljanje dostupnoÅ¡Ä‡u</h3>
        <p>Kliknite na dane da biste ih otvorili ili zatvorili za rezervacije.</p>
        <p><strong>Napomena:</strong> Promene se Äuvaju automatski Äim kliknete na datum.</p>

        <div class="status-legend">
          <div class="legend-item"><span class="box reserved"></span> Rezervisano (nije moguÄ‡e menjati)</div>
          <div class="legend-item"><span class="box unavailable"></span> Nedostupno (zatvoreno)</div>
        </div>
      </div>

      <div class="calendar-side">
        <app-host-calendar
          [apartment]="property"
          [userRole]="'HOST'"
          mode="availability">
        </app-host-calendar>
      </div>
    </div>

    <div *ngIf="view === 'pricing'" class="pricing-layout">
      <div class="form-side">
        <h3>Postavi posebnu cenu</h3>

        <div class="input-group">
          <label>Cena (â‚¬)</label>
          <input type="number" [(ngModel)]="pricingForm.price" placeholder="Unesite iznos">
        </div>

        <div class="input-group">
          <label>NaÄin obraÄuna za smeÅ¡taj</label>
          <select [(ngModel)]="property.pricingStrategy">
            <option value="PER_GUEST">Po osobi / gostu</option>
            <option value="PER_UNIT">Po celoj jedinici (apartmanu)</option>
          </select>
        </div>

        <div class="selection-box" [class.has-selection]="selectedDatesFromCalendar.length > 0">
          <p *ngIf="selectedDatesFromCalendar.length === 0">
            Kliknite na dane u kalendaru da biste im promenili cenu.
          </p>
          <p *ngIf="selectedDatesFromCalendar.length > 0">
            Selektovano dana: <strong>{{selectedDatesFromCalendar.length}}</strong>
          </p>
        </div>

        <button class="save-price-btn"
                [disabled]="selectedDatesFromCalendar.length === 0"
                (click)="saveNewPrice()">
          Primeni cenu
        </button>
      </div>

      <div class="calendar-side">
        <app-host-calendar
          [apartment]="property"
          [userRole]="'HOST'"
          mode="pricing"
          (pricingDatesSelected)="onDatesSelected($event)">
        </app-host-calendar>
      </div>
    </div>

    <div *ngIf="view === 'settings'" class="settings-view">
      <h3>Pravila rezervacije</h3>
      <div class="input-group">
        <label>Otkazni rok (broj dana pre dolaska)</label>
        <input type="number" [(ngModel)]="property.cancellationDeadline">
      </div>
      <button class="save-price-btn" (click)="saveGeneralSettings()">SaÄuvaj pravila</button>
    </div>

  </main>
</div>
